<div class="cart-container">
  <h1 class="cart-title">Your Shopping Cart</h1>
  
  {% if cart.item_count > 0 %}
    <form action="/cart" method="post" novalidate class="cart-form">
      <div class="cart-items">
        <div class="cart-header">
          <div class="cart-header-product">Product</div>
          <div class="cart-header-price">Price</div>
          <div class="cart-header-quantity">Quantity</div>
          <div class="cart-header-total">Total</div>
          <div class="cart-header-remove"></div>
        </div>
        
        {% for item in cart.items %}
          <div class="cart-item" id="CartItem-{{ item.index | plus: 1 }}">
            {% render 'line-item', line_item: item %}
          </div>
        {% endfor %}
      </div>
      
      <div class="cart-footer">
        <div class="cart-note">
          <label for="CartNote" class="cart-note-label">Order Special Instructions</label>
          <textarea name="note" id="CartNote" class="cart-note-textarea">{{ cart.note }}</textarea>
        </div>
        
        <div class="cart-summary">
          <div class="cart-blocks">
            {% if cart.cart_level_discount_applications.size > 0 %}
              <div class="cart-block">
                <div class="cart-block-title">Discounts</div>
                <div class="cart-block-content">
                  {% for discount_application in cart.cart_level_discount_applications %}
                    <div class="cart-discount">
                      <span class="cart-discount-title">{{ discount_application.title }}</span>
                      <span class="cart-discount-amount">-{{ discount_application.total_allocated_amount | money }}</span>
                    </div>
                  {% endfor %}
                </div>
              </div>
            {% endif %}
            
            <div class="cart-block">
              <div class="cart-block-title">Subtotal</div>
              <div class="cart-block-content">
                <span class="cart-subtotal-price">{{ cart.total_price | money }}</span>
              </div>
            </div>
            
            <div class="cart-block">
              <div class="cart-block-title">Taxes and shipping calculated at checkout</div>
            </div>
          </div>
          
          <div class="cart-actions">
            <button type="submit" name="update" class="cart-update-button">Update Cart</button>
            <button type="submit" name="checkout" class="cart-checkout-button">Checkout</button>
          </div>
        </div>
      </div>
    </form>
  {% else %}
    <div class="cart-empty">
      <p class="cart-empty-text">Your cart is currently empty.</p>
      <div class="cart-empty-action">
        <a href="/collections/all" class="cart-continue-button">Continue Shopping</a>
      </div>
    </div>
  {% endif %}
</div>

<script src="{{ 'cart.js' | asset_url }}" defer></script>

<style>
  .cart-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }
  
  .cart-title {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 2rem;
    text-align: center;
  }
  
  .cart-form {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }
  
  .cart-items {
    border: 1px solid #e5e5e5;
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  .cart-header {
    display: grid;
    grid-template-columns: 3fr 1fr 1fr 1fr 0.5fr;
    padding: 1rem;
    background-color: #f9f9f9;
    font-weight: bold;
    border-bottom: 1px solid #e5e5e5;
  }
  
  .cart-item {
    border-bottom: 1px solid #e5e5e5;
  }
  
  .cart-item:last-child {
    border-bottom: none;
  }
  
  .cart-footer {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
  }
  
  .cart-note {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .cart-note-label {
    font-weight: bold;
  }
  
  .cart-note-textarea {
    min-height: 100px;
    padding: 0.5rem;
    border: 1px solid #e5e5e5;
    border-radius: 0.25rem;
    resize: vertical;
  }
  
  .cart-summary {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .cart-blocks {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .cart-block {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
  }
  
  .cart-block-title {
    font-weight: bold;
  }
  
  .cart-discount {
    display: flex;
    justify-content: space-between;
    color: #008000;
  }
  
  .cart-subtotal-price {
    font-weight: bold;
    font-size: 1.2rem;
  }
  
  .cart-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
  }
  
  .cart-update-button,
  .cart-checkout-button,
  .cart-continue-button {
    padding: 0.75rem 1.5rem;
    border-radius: 0.25rem;
    font-weight: bold;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
    transition: background-color 0.3s ease;
  }
  
  .cart-update-button {
    background-color: #f9f9f9;
    border: 1px solid #e5e5e5;
    color: #333;
  }
  
  .cart-checkout-button {
    background-color: #000;
    border: 1px solid #000;
    color: #fff;
    flex-grow: 1;
  }
  
  .cart-continue-button {
    background-color: #000;
    border: 1px solid #000;
    color: #fff;
    display: inline-block;
  }
  
  .cart-empty {
    text-align: center;
    padding: 3rem 0;
  }
  
  .cart-empty-text {
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
  }
  
  @media screen and (max-width: 768px) {
    .cart-header {
      display: none;
    }
    
    .cart-footer {
      grid-template-columns: 1fr;
    }
  }
</style>
